<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head.ejs', { cssSheets: ["register"], title: "Registro de usuario" }) %>

<body>
  <%- include('../partials/header.ejs') %>
  <main>
    <h1 class="register__title">Regístrate</h1>
    <form
      class="register__form" 
      action="/users/register"
      method="post"
      enctype="multipart/form-data"
    >
      <div class="register__fields">
        <div class="register__field-container">
          <label for="user">Nombre de usuario</label>
          <input type="text" name="username" id="user" placeholder="Nombre"
            value="<%= (locals.old && old.username) ? old.username : '' %>" />
        </div>

        <% if (locals.errors && errors.username){%>
          <div class="register__errors">
            <i>
              <%= errors.username.msg %>
            </i>
          </div>
        <% } %>

        <div class="register__errors" id="userError"></div>

        <div class="register__field-container">
          <label for="email">Correo electrónico</label>
          <input type="email" name="email" id="email" placeholder="Correo electrónico"
            value="<%= (locals.old && old.email) ? old.email: '' %>" />
        </div>

        <% if (locals.errors && errors.email){%>
          <div class="register__errors">
            <i>
              <%= errors.email.msg %>
            </i>
          </div>
        <% } %>

        <% if (errores){%>
          <div class="register__errors">
            <i>
              <%= errores %>
            </i>
          </div>
        <% } %>

        <div class="register__errors" id="emailError"></div>

        <div class="register__field-container">
          <label for="password">Contraseña</label>
          <div class="register__password-container">
            <input 
              type="password"
              name="password"
              id="password"
              placeholder="Contraseña"
              value="<%= (locals.old && old.password) ? old.password : '' %>" />
            <img src="/img/icons/eye.svg" alt="eye" class="register__eye" id="toggle-password">
          </div>
        </div>

        <% if (locals.errors && errors.password){%>
          <div class="register__errors">
            <i>
              <%= errors.password.msg %>
            </i>
          </div>
          <% } %>

        <div class="register__errors" id="passwordError"></div>

        <div class="register__field-container">
          <label for="password-confirm">Confirmar Contraseña</label>
          <div class="register__password-container">
            <input 
              type="password"
              name="passwordRepeat"
              id="passwordRepeat"
              placeholder="Confirmar Contraseña"
              value="<%= (locals.old && old.passwordRepeat) ? old.passwordRepeat : '' %>"
            />
            <img src="/img/icons/eye.svg" alt="eye" class="register__eye" id="toggle-password-confirm">
          </div>
        </div>

        <% if (locals.errors && errors.passwordRepeat){%>
          <div class="register__errors">
            <i>
              <%= errors.passwordRepeat.msg %>
            </i>
          </div>
        <% } %>

        <% if (error){%>
          <div class="register__errors">
            <i>
              <%= error %>
            </i>
          </div>
        <% } %>

        <div class="register__errors" id="passwordRepeatError"></div>

        <div class="register__form-img-container">
          <label for="image">Agregar imagen</label>
          <input type="file" id="image" name="image">
        </div>
        
      </div>
      <button class="register__button" type="submit">Crear cuenta</button>
    </form>
  </main>
  <%- include('../partials/footer.ejs') %>
  <script src="/js/register.js"></script>
  <script src="/js/util.js"></script>
  </body>
</html>